(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(n,e,t){n.exports=t(27)},22:function(n,e,t){},27:function(n,e,t){"use strict";t.r(e);var r={};t.r(r),t.d(r,"nil",function(){return l}),t.d(r,"cons",function(){return d}),t.d(r,"pop",function(){return m}),t.d(r,"equals",function(){return v}),t.d(r,"getLast",function(){return g}),t.d(r,"toArray",function(){return h});var u={};t.r(u),t.d(u,"App",function(){return nn});var c=t(0),o=t.n(c),i=t(9),a=t.n(i);t(22),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var f=t(3),s=t(5),p=t(1),l={type:"nil",length:0},d=function(n,e){return{type:"cons",value:n,prev:e,length:e.length+1}},m=function(n){return"nil"===n.type?n:n.prev};function v(n,e){for(var t=n,r=e;;)switch(t.type){case"nil":return"nil"===r.type;case"cons":if("cons"!==r.type||t.value!==r.value)return!1;t=t.prev,r=r.prev}}var g=function(n){return"nil"===n.type?p.none:p.some(n.value)},h=function(n){for(var e=n.length,t=new Array(e),r=n,u=1;"nil"!==r.type;)t[e-u]=r.value,u++,r=r.prev;return t},y={currentId:l},b={activeId:p.none,pressedId:p.none,focusedId:p.none,inputBuffer:p.none,inputBufferState:"dirty",focusTrap:!1};function O(n){return function(e){return Object(f.a)({},e,{activeId:n})}}function j(n){return function(e){return Object(f.a)({},e,{focusedId:n})}}function E(n){return function(e){return Object(f.a)({},e,{inputBuffer:n,inputBufferState:"dirty"})}}var I=p.getEq(r);function w(n,e){return I.equals(p.some(n.currentId),e.activeId)}var A=t(2),T=t(4),k=t(10),x=t(7),B=function(n){return{type:"render",dsl:n}},F=function(n){return{type:"continue",state:n}},S=function(n){return{type:"suspendAndResume",effect:n}},q=function(n,e,t,r){return function(u){switch(u.type){case"render":return n(u.dsl);case"continue":return e(u.state);case"halt":return t(u.state);case"suspendAndResume":return r(u.effect)}}};var N=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return{type:"translable_string",strings:n,values:t}},R=function(n){return function(e){return Object(A.pipe)(T.modify((t=n,function(n){return Object(f.a)({},n,{currentId:d(t,n.currentId)})})),T.chain(function(){return e}),T.chainFirst(function(){return T.modify(function(n){return Object(f.a)({},n,{currentId:m(n.currentId)})})}));var t}},C=function(n){return T.gets(function(e){return function(t){return B(function(n,e){return{type:"text",id:n,text:e}}(e.currentId,n))}})},L=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return Object(A.pipe)(k.array.sequence(T.state)(e),T.chain(function(n){return T.gets(function(e){return function(t){return function(n,e,t){for(var r=n,u=0,c=[];u<e.length;){var o=e[u](r);switch(o.type){case"render":c.push(o.dsl);break;case"continue":r=o.state;break;case"halt":case"suspendAndResume":return o}u++}return c.length!==e.length?F(r):B(t(c))}(t,n,function(n){return{type:"container",id:e.currentId,children:n}})}})}))},D=function(n,e){return T.gets(function(t){return function(r){var u=w(t,r),c=function(n,e){return!e.focusTrap&&p.isNone(e.activeId)&&!w(n,e)}(t,r),o=function(n,e){return!e.focusTrap&&w(n,e)}(t,r),i=function(n,e){return I.equals(p.some(n.currentId),e.focusedId)}(t,r),a=i;if(u&&!i&&p.isSome(r.inputBuffer)&&!r.focusTrap)return S(Object(A.pipe)(e(p.getOrElse(function(){return n})(r.inputBuffer)),x.map(function(){return Object(A.pipe)(r,E(p.none))})));if(a&&c)return F(Object(A.pipe)(r,O(p.some(t.currentId)),E(p.none)));if(!a&&o)return F(O(p.none)(r));var f=u?p.getOrElse(function(){return n})(r.inputBuffer):n;return B(function(n,e,t,r){return{type:"input",id:n,value:e,active:t,focused:r}}(t.currentId,f,u,i))}})},J=function(n,e){return Object(A.pipe)((t=function(e,t){return w(e,t)&&!function(n){return!isNaN(parseInt(n,10))}(p.getOrElse(function(){return n.toFixed(0)})(t.inputBuffer))},function(n){return Object(A.pipe)(n,T.chain(function(n){return T.gets(function(e){return function(r){return Object(A.pipe)(n(Object(f.a)({},r,{focusTrap:t(e,r)})),q(function(n){return B(n)},function(n){return F(Object(f.a)({},n,{focusTrap:r.focusTrap}))},function(n){return function(n){return{type:"halt",state:n}}(Object(f.a)({},n,{focusTrap:r.focusTrap}))},function(n){return S(Object(A.pipe)(n,x.map(function(n){return Object(f.a)({},n,{focusTrap:r.focusTrap})})))}))}})}))})(D(n.toFixed(0),function(n){return e(parseInt(n,10))})));var t},W=t(11),P=t(12),U=t(14),M=t(13),$=t(15);var _=c.memo(function(n){var e=c.useRef();return c.useEffect(function(){e.current&&"input"===n.dsl.type&&n.dsl.focused&&e.current!==document.activeElement&&e.current.focus()}),"input"!==n.dsl.type?null:c.createElement("input",{ref:e,type:"text",value:n.dsl.value,readOnly:!n.dsl.active,onChange:function(e){return n.dispatch(E(p.some(e.target.value)))()},onFocus:n.dispatch(j(p.some(n.dsl.id))),onBlur:n.dispatch(j(p.none)),style:n.dsl.active?{border:"3px solid red"}:{}})}),z=c.memo(function(n){return"text"!==n.dsl.type?null:c.createElement(c.Fragment,null,(e=n.dsl.text).strings.map(function(n,t){return n+(e.values[t]||"")}).join(""));var e}),G=c.memo(function(n){return"container"!==n.dsl.type?null:c.createElement(c.Fragment,null,n.dsl.children.map(function(e,t){return c.createElement(H,Object.assign({},n,{key:t,dsl:e}))}))}),H=c.memo(function(n){switch(n.dsl.type){case"input":return c.createElement(_,n);case"container":return c.createElement(G,n);case"text":return c.createElement(z,n)}return c.createElement(c.Fragment,null,JSON.stringify(n.dsl))}),K=function(n){function e(n){var t;return Object(W.a)(this,e),(t=Object(U.a)(this,Object(M.a)(e).call(this,n))).state=b,t.app=void 0,t.eventLoop=function(n){for(var e=n,r=0;r<10;){var u=t.app(e);switch(u.type){case"render":return e;case"continue":e=u.state;break;case"suspendAndResume":e=u.effect(),t.app=t.getApp(t.props);break;case"halt":e=u.state}r++}return console.warn("end of max loop count"),e},t.dispatch=function(n){return function(){return t.setState(function(e){return t.eventLoop(n(e))})}},t.app=t.getApp(n),t}return Object($.a)(e,n),Object(P.a)(e,[{key:"getApp",value:function(n){return n.getApp()(y)[0]}},{key:"componentWillMount",value:function(){var n=this;this.setState(function(e){return n.eventLoop(e)})}},{key:"render",value:function(){var n=this,e=this.app(this.state);return Object(A.pipe)(e,q(function(e){return c.createElement(H,{dsl:e,dispatch:n.dispatch})},function(n){return c.createElement(c.Fragment,null,"continuing...")},function(n){return c.createElement(c.Fragment,null,"halting...")},function(n){return c.createElement(c.Fragment,null,"effect...")}))}}]),e}(c.Component);function Q(){var n=Object(s.a)(["Ciao "," ",", complimenti per i tuoi "," anni!"]);return Q=function(){return n},n}function V(){var n=Object(s.a)(["Cognome:"]);return V=function(){return n},n}function X(){var n=Object(s.a)(["Nome:"]);return X=function(){return n},n}function Y(){var n=Object(s.a)(["Et\xe0:"]);return Y=function(){return n},n}var Z={name:"",surname:"",age:0};function nn(){return c.createElement(K,{getApp:function(){return(n=Z,function(e){return L(L(C(N(Y())),R("age")(J(n.age,function(t){return e(Object(f.a)({},n,{age:t}))}))),L(C(N(X())),R("name")(D(n.name,function(t){return e(Object(f.a)({},n,{name:t}))}))),L(C(N(V())),R("surname")(D(n.surname,function(t){return e(Object(f.a)({},n,{surname:t}))}))),C(N(Q(),n.name,n.surname,n.age.toFixed(0))))})(function(n){return console.log("STATE UPDATE",n),function(){console.log("STATE UPDATED",n),Z=n}});var n}})}console.log(u),a.a.render(o.a.createElement(nn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.57b98cc9.chunk.js.map